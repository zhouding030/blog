# DDD构建代码结构

DDD（领域驱动设计）的代码结构通常包含如下：

·   用户接口层：主要负责用户显示信息和接受用户的指令。这包括用户、程序、自动化测试、批处理等交互方式。

·   应用层：应用层是系统的核心，负责协调业务逻辑的执行。它接收来自用户接口层的请求，将请求转化为适当的领域操作，并协调领域层的对象进行处理。应用层不应包含具体的业务逻辑，而是将业务逻辑委托给领域层。

·   领域层：领域层是DDD代码结构的核心，主要体现领域模型的业务能力。它包含系统的核心业务逻辑和领域模型，由聚合、实体、值对象以及领域服务组成。领域层负责实现业务规则、验证和状态变更等核心领域逻辑。

·   基础设施层：基础设施层提供与外部系统的交互，如数据库、文件系统、消息队列等。它包含各种技术实现和框架，用于支持应用程序的运行。基础设施层还可以包括数据访问层、消息传递层、日志记录等。

·   此外，在某些情况下，还可能有adapter层。这个层主要是根据请求来源或类型进行适配，对app层的结果进行封装。如果是web服务，则包含adapter层；如果是业务服务，则可以去掉adapter层。

另外，为了更好地组织代码，DDD还强调细分结构，例如assembler、dto和façade等。其中，assembler实现DTO与DO间的相互转换和数据交换；dto是数据传输的载体，内部不存在任何业务逻辑；façade提供较粗粒度的调用接口，将用户请求委派给一个或多个应用服务进行处理。